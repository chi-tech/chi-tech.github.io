<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Chi-Tech: Tutorial 1: Basic Diffusion Simulation (No output)</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Logo2_Small.bmp"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Chi-Tech
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d4/d0f/_tutorial01.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Tutorial 1: Basic Diffusion Simulation (No output) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Let us tackle the basic diffusion equation as applied to steady state heat transfer.<br />
 </p><p class="formulaDsp">
\[ \nabla k \nabla T = q \]
</p>
<p>The purpose of this tutorial is to understand the basics of the input paradigm which is completely different from the traditional input-card based paradigm. ChiTech uses an imbedded Lua console. For a history of Lua please see its wikipedia page <a href="https://en.wikipedia.org/wiki/Lua_(programming_language)">here</a>. This paradigm allows the user to control many aspects of the program flow as well to be more versatile when creating inputs, i.e. reading files, for loops to create multiple entities etc. So let us get started.</p>
<h2>Step 1 - Create your input file, open it in a text editor</h2>
<p>Go to the directory of your choosing and make an input file of your choosing. The input file does not require a specific .lua or .inp extension although if you use .lua then there are many text editors that will be able to provide syntax highlighting.</p>
<h2>Step 2 - Create a mesh handler</h2>
<div class="fragment"><div class="line"><a class="code" href="../../da/d92/group___lua_mesh_handler_ga7d6dee3f32f771fa919138ab80dcdcf4.html#ga7d6dee3f32f771fa919138ab80dcdcf4">chiMeshHandlerCreate</a>()</div></div><!-- fragment --><p>This function call creates a new mesh handler and pushes it to a global stack. It also make the newly created handler the "current" meaning all mesh operations will operate on this handler. The concept of creating, reading or manipulating computational meshes is centered on operating on a specific <a class="el" href="../../d2/d10/classchi__mesh_1_1_mesh_handler.html">chi_mesh::MeshHandler</a> object. Physics/math objects can then freely operate on meshes by simply specifying which handler to use.</p>
<h2>Step 3 - Load a 2D surface mesh as template for extrusion</h2>
<p>The extrusion mesh generator requires a 2D mesh to generate the actual extrusion and this is how to load such a surface. For now we will use a test object included in ChiTech, which is an orthogonal grid of 32x32 cells (1024 total).</p>
<div class="image">
<img src="../../SquareMesh2x2Quads.png" alt="SquareMesh2x2Quads.png" width="350px"/>
<div class="caption">
Figure 1 - Mesh spanning from [-1,-1] to [1,1]</div></div>
<div class="fragment"><div class="line">newSurfMesh = <a class="code" href="../../db/dc8/group___lua_surface_mesh_ga83af311a7fbb23a8a89e4da6275278b2.html#ga83af311a7fbb23a8a89e4da6275278b2">chiSurfaceMeshCreate</a>();</div><div class="line"><a class="code" href="../../db/dc8/group___lua_surface_mesh_gabfd0722a36eedaee766f66d42ee532b8.html#gabfd0722a36eedaee766f66d42ee532b8">chiSurfaceMeshImportFromOBJFile</a>(newSurfMesh,</div><div class="line">        <span class="stringliteral">&quot;CHI_RESOURCES/TestObjects/SquareMesh2x2Quads.obj&quot;</span>)</div></div><!-- fragment --><p>The first function call, <a class="el" href="../../db/dc8/group___lua_surface_mesh_ga83af311a7fbb23a8a89e4da6275278b2.html#ga83af311a7fbb23a8a89e4da6275278b2">CHI_LUA::chiSurfaceMeshCreate</a>, returns a handle to an unpopulated surface mesh. This handle is essentially a stack index on the current mesh handler. The second function call, <a class="el" href="../../db/dc8/group___lua_surface_mesh_gabfd0722a36eedaee766f66d42ee532b8.html#gabfd0722a36eedaee766f66d42ee532b8">CHI_LUA::chiSurfaceMeshImportFromOBJFile</a>, receives as arguments the handle to the empty surface mesh and a filename pointing to a <a href="https://en.wikipedia.org/wiki/Wavefront_.obj_file">wavefront</a> ".obj" file.</p>
<p><b>NOTE:</b> File names and paths are relative to where the executable is executed. i.e. If you are in your desktop folder then the path will be relative to it. Absolute paths can also be specified.</p>
<h2>Step 3 - Create a region and add the surface mesh as a boundary</h2>
<p>A region is a weak concept for now but will later be used for transformation of meshes and boundaries. Boundaries get added to regions. A surface mesh boundary does not have a physical sense when using an extrusion. i.e It doesn't define the boundary on that surface. It gets assimilated during meshing process.</p>
<div class="fragment"><div class="line">region1 = <a class="code" href="../../df/dda/group___lua_region_ga12d91bac4cbde16ef605143f6437e806.html#ga12d91bac4cbde16ef605143f6437e806">chiRegionCreate</a>()</div><div class="line"><a class="code" href="../../df/dda/group___lua_region_ga88d006b2cf5cf7021f9d0c64d30a156a.html#ga88d006b2cf5cf7021f9d0c64d30a156a">chiRegionAddSurfaceBoundary</a>(region1,newSurfMesh);</div></div><!-- fragment --><p>The first function call, <a class="el" href="../../df/dda/group___lua_region_ga12d91bac4cbde16ef605143f6437e806.html#ga12d91bac4cbde16ef605143f6437e806">CHI_LUA::chiRegionCreate</a>, returns a handle to an empty Region similar to what we used with the surface mesh. The second function call, <a class="el" href="../../df/dda/group___lua_region_ga88d006b2cf5cf7021f9d0c64d30a156a.html#ga88d006b2cf5cf7021f9d0c64d30a156a">CHI_LUA::chiRegionAddSurfaceBoundary</a>, receives as arguments a region handle and a surface mesh handle.</p>
<h2>Step 4 - Creating the meshers</h2>
<p>Generating meshes in ChiTech follows the same paradigm as Star-CCM+. We first execute a surface meshing routing then a volume meshing routine. This is true whether you are doing a 1D, 2D or 3D simulation.</p>
<div class="fragment"><div class="line"><a class="code" href="../../d1/d9b/group___lua_surface_mesher_ga7167fdac9f720677dc78a356ca1c391b.html#ga7167fdac9f720677dc78a356ca1c391b">chiSurfaceMesherCreate</a>(SURFACEMESHER_PREDEFINED);</div><div class="line"><a class="code" href="../../d4/d3a/group___lua_volume_mesher_ga49963c2a7ea611bc23ecab6e61dc4cb5.html#ga49963c2a7ea611bc23ecab6e61dc4cb5">chiVolumeMesherCreate</a>(VOLUMEMESHER_EXTRUDER);</div></div><!-- fragment --><p>A surface mesher is created using <a class="el" href="../../d1/d9b/group___lua_surface_mesher_ga7167fdac9f720677dc78a356ca1c391b.html#ga7167fdac9f720677dc78a356ca1c391b">CHI_LUA::chiSurfaceMesherCreate</a> and for our purpose we are using a SURFACEMESHER_PREDEFINED which means we will be using predefined 2D cells and therefore will not be creating/modifying the surface mesh. The extruder is created with the call to <a class="el" href="../../d4/d3a/group___lua_volume_mesher_ga49963c2a7ea611bc23ecab6e61dc4cb5.html#ga49963c2a7ea611bc23ecab6e61dc4cb5">CHI_LUA::chiVolumeMesherCreate</a> with a type VOLUMEMESHER_EXTRUDER.</p>
<h2>Step 5 - Setup extrusion layers</h2>
<p>Extrusion layers are needed by the extruder to define the 3D meshes. By default a single layer of height 1.0 will be used provided that the user does not provide layer information.</p>
<div class="fragment"><div class="line">subdivisions=3</div><div class="line"><a class="code" href="../../d4/d3a/group___lua_volume_mesher_ga877810586ad18728337d7cab842242a8.html#ga877810586ad18728337d7cab842242a8">chiVolumeMesherSetProperty</a>(EXTRUSION_LAYER,3.0,subdivisions,<span class="stringliteral">&quot;My Layer&quot;</span>);</div></div><!-- fragment --><p>Extrusion layers are handled as a property of the extruder mesh and hence they are specified with a call to <a class="el" href="../../d4/d3a/group___lua_volume_mesher_ga877810586ad18728337d7cab842242a8.html#ga877810586ad18728337d7cab842242a8">CHI_LUA::chiVolumeMesherSetProperty</a>. It requires as arguments firstly the property index, which for this case is, EXTRUSION_LAYER, followed by the height of this layer (3.0), the number of sub-divisions, and a name for the layer. At this moment the name is of no physical meaning other than to help the user organize.</p>
<h2>Step 6 - Execute the meshers</h2>
<p>By executing the meshers we create the geometry of the mesh. All material id's will be empty (-1) but the mesh can be visualized for error checking.</p>
<div class="fragment"><div class="line"><a class="code" href="../../d1/d9b/group___lua_surface_mesher_ga3e282401531b27d35df9c5d19f132b37.html#ga3e282401531b27d35df9c5d19f132b37">chiSurfaceMesherExecute</a>();</div><div class="line"><a class="code" href="../../d4/d3a/group___lua_volume_mesher_gaaa70b33a0935af1be76df133113fb7f4.html#gaaa70b33a0935af1be76df133113fb7f4">chiVolumeMesherExecute</a>();</div></div><!-- fragment --><h2>Step 7 - Assign material ID's</h2>
<p>Materials ID's can conveniently be specified using logical volumes. There are many options for logical volumes ranging from primitive parametric surfaces to non-convex user generated surfaces using surface meshes. For this tutorial we will use a rectangular paralellipiped (brick) as follows.</p>
<div class="fragment"><div class="line">material = <a class="code" href="../../d7/d11/group___lua_physics_materials_ga8d13197b28523323399a61ecbe703ba7.html#ga8d13197b28523323399a61ecbe703ba7">chiPhysicsAddMaterial</a>(<span class="stringliteral">&quot;Test Material&quot;</span>);</div><div class="line"></div><div class="line">vol0 = <a class="code" href="../../d9/d32/group___lua_logic_volumes_gad12fbbcc9338d45e2085811244e121cb.html#gad12fbbcc9338d45e2085811244e121cb">chiLogicalVolumeCreate</a>(RPP,-1000,1000,-1000,1000,-1000,1000)</div><div class="line"><a class="code" href="../../d4/d3a/group___lua_volume_mesher_ga877810586ad18728337d7cab842242a8.html#ga877810586ad18728337d7cab842242a8">chiVolumeMesherSetProperty</a>(MATID_FROMLOGICAL,vol0,material)</div></div><!-- fragment --><p>We first create a material using the <a class="el" href="../../d7/d11/group___lua_physics_materials_ga8d13197b28523323399a61ecbe703ba7.html#ga8d13197b28523323399a61ecbe703ba7">CHI_LUA::chiPhysicsAddMaterial</a> function. The handle of this material will essentially be zero but it is not technically required by the <a class="el" href="../../d4/d3a/group___lua_volume_mesher_ga877810586ad18728337d7cab842242a8.html#ga877810586ad18728337d7cab842242a8">chiVolumeMesherSetProperty()</a> function since this function operates on the integer supplied. This material is added to the physics environment and therefore has scope over all mesh handlers and all physics entities. We then create a logical volume using the function <a class="el" href="../../d9/d32/group___lua_logic_volumes_gad12fbbcc9338d45e2085811244e121cb.html#gad12fbbcc9338d45e2085811244e121cb">CHI_LUA::chiLogicalVolumeCreate</a> with arguments RPP, specifying that we will be using a Rectangular Parallelipiped and then a series of dimensions specifying xmin-xmax-ymin-ymax-zmin-zmax. Every cell centroid within these dimensions will be flagged as being "within" the logical volume.</p>
<p>Actually setting the mesh's material id's is a utility facilitated by a volume mesher property and hence we call <a class="el" href="../../d4/d3a/group___lua_volume_mesher_ga877810586ad18728337d7cab842242a8.html#ga877810586ad18728337d7cab842242a8">CHI_LUA::chiVolumeMesherSetProperty</a> with a property index MATID_FROMLOGICAL. Next we provided a handle to the logical volume (vol0) and the desired material id. Logical volumes are very diverse and their uses are discussed elsewhere.</p>
<p>The culmination of this step is all done within a physics agnostic framework. The user can even export the mesh for visualization using the function <a class="el" href="../../df/dda/group___lua_region_gadf6f74ed713e24ef8c44516fc2a44772.html#gadf6f74ed713e24ef8c44516fc2a44772">chiRegionExportMeshToObj()</a>. The extruded mesh is shown below:</p>
<div class="image">
<img src="../../SquareMeshExtruded.png" alt="SquareMeshExtruded.png" width="350px"/>
<div class="caption">
Figure 2 - Extruded mesh</div></div>
<h2>Step 8 - Adding material properties</h2>
<p>Now that the cells have been assigned a material id we need to add properties to the material conducive to a diffusion simulation. For a heat transfer diffusion simulation we will need to know the thermal conductivity "k" and the volumetric source strength "q". Both of these can be simple scalar values.</p>
<div class="fragment"><div class="line"><a class="code" href="../../d7/d11/group___lua_physics_materials_gaca0d6b0498258b0bbedcf9f3c13a30ed.html#gaca0d6b0498258b0bbedcf9f3c13a30ed">chiPhysicsMaterialAddProperty</a>(material,SCALAR_VALUE,<span class="stringliteral">&quot;k&quot;</span>)</div><div class="line"><a class="code" href="../../d7/d11/group___lua_physics_materials_ga2f1cdfe3dc85457d4fc4780d37e73270.html#ga2f1cdfe3dc85457d4fc4780d37e73270">chiPhysicsMaterialSetProperty</a>(material,&quot;k&quot;,SINGLE_VALUE,1.0)</div><div class="line"></div><div class="line"><a class="code" href="../../d7/d11/group___lua_physics_materials_gaca0d6b0498258b0bbedcf9f3c13a30ed.html#gaca0d6b0498258b0bbedcf9f3c13a30ed">chiPhysicsMaterialAddProperty</a>(material,SCALAR_VALUE,&quot;q&quot;)</div><div class="line"><a class="code" href="../../d7/d11/group___lua_physics_materials_ga2f1cdfe3dc85457d4fc4780d37e73270.html#ga2f1cdfe3dc85457d4fc4780d37e73270">chiPhysicsMaterialSetProperty</a>(material,&quot;q&quot;,SINGLE_VALUE,1.0)</div></div><!-- fragment --><p>In this code we created the material properties using the function <a class="el" href="../../d7/d11/group___lua_physics_materials_gaca0d6b0498258b0bbedcf9f3c13a30ed.html#gaca0d6b0498258b0bbedcf9f3c13a30ed">CHI_LUA::chiPhysicsMaterialAddProperty</a> which requires a handle to the reference material, the property type (SCALAR_VALUE), and a name for the property. Unlike extrusion layers the property name can be used in further calls to refer to the specific property.</p>
<p>Material property values are set using the function <a class="el" href="../../d7/d11/group___lua_physics_materials_ga2f1cdfe3dc85457d4fc4780d37e73270.html#ga2f1cdfe3dc85457d4fc4780d37e73270">CHI_LUA::chiPhysicsMaterialSetProperty</a> which again expects a handle to the reference material, then either a material property id or name (in this case name), then an operation index and value(s). For this case we used an operation index SINGLE_VALUE which is the only operation supported by SCALAR_VALUE. In future the user can specify, as an example, temperature dependent values which will support the operation FROM_TABLE, but that is a topic for a different time.</p>
<h2>Step 9 - Setup the diffusion physics</h2>
<p>The following sequence of function calls completely define the diffusion solver.</p>
<div class="fragment"><div class="line">phys1 = <a class="code" href="../../de/d15/group___lua_diffusion_gae447e896898d4d16fa54a1338511eeb5.html#gae447e896898d4d16fa54a1338511eeb5">chiDiffusionCreateSolver</a>();</div><div class="line"><a class="code" href="../../dc/d4e/group___lua_solver_ga15162e7e9864bb9dcf30de0ce04a6803.html#ga15162e7e9864bb9dcf30de0ce04a6803">chiSolverAddRegion</a>(phys1,region1)</div><div class="line"><a class="code" href="../../de/d15/group___lua_diffusion_ga5c6d2bdff1c9301cd13d0c5e9f22f763.html#ga5c6d2bdff1c9301cd13d0c5e9f22f763">chiDiffusionSetProperty</a>(phys1,DISCRETIZATION_METHOD,PWLC);</div><div class="line"><a class="code" href="../../de/d15/group___lua_diffusion_ga5c6d2bdff1c9301cd13d0c5e9f22f763.html#ga5c6d2bdff1c9301cd13d0c5e9f22f763">chiDiffusionSetProperty</a>(phys1,RESIDUAL_TOL,1.0e-4)</div></div><!-- fragment --><p>We first create the diffusion solver with a call to <a class="el" href="../../de/d15/group___lua_diffusion_gae447e896898d4d16fa54a1338511eeb5.html#gae447e896898d4d16fa54a1338511eeb5">CHI_LUA::chiDiffusionCreateSolver</a>. This creates the solver and pushes it onto the physics handler. The function returns the handle. We then add our mesh region to this solver using the function <a class="el" href="../../dc/d4e/group___lua_solver_ga15162e7e9864bb9dcf30de0ce04a6803.html#ga15162e7e9864bb9dcf30de0ce04a6803">CHI_LUA::chiSolverAddRegion</a> which expects a handle to the reference solver followed by the handle to the relevant region.</p>
<p>Next we can set numerous diffusion solver properties which can comprehensively viewed in its specific documentation (<a class="el" href="../../de/d15/group___lua_diffusion_ga5c6d2bdff1c9301cd13d0c5e9f22f763.html#ga5c6d2bdff1c9301cd13d0c5e9f22f763">CHI_LUA::chiDiffusionSetProperty</a>).</p>
<h2>Step 10 - Initialize and Solve</h2>
<p>The final step of this process is to initialize and execute the diffusion solver.</p>
<div class="fragment"><div class="line"><a class="code" href="../../de/d15/group___lua_diffusion_ga2ddcaaab893f78dc401a4cb7d53d7e09.html#ga2ddcaaab893f78dc401a4cb7d53d7e09">chiDiffusionInitialize</a>(phys1)</div><div class="line"><a class="code" href="../../de/d15/group___lua_diffusion_ga0bbc893ec4d87ff00001daf2290bbe68.html#ga0bbc893ec4d87ff00001daf2290bbe68">chiDiffusionExecute</a>(phys1)</div></div><!-- fragment --><h2>Complete input file</h2>
<p>Here is the complete input file with comments</p>
<div class="fragment"><div class="line">--############################################### Setup mesh</div><div class="line"><a class="code" href="../../da/d92/group___lua_mesh_handler_ga7d6dee3f32f771fa919138ab80dcdcf4.html#ga7d6dee3f32f771fa919138ab80dcdcf4">chiMeshHandlerCreate</a>()</div><div class="line"></div><div class="line">newSurfMesh = <a class="code" href="../../db/dc8/group___lua_surface_mesh_ga83af311a7fbb23a8a89e4da6275278b2.html#ga83af311a7fbb23a8a89e4da6275278b2">chiSurfaceMeshCreate</a>();</div><div class="line"><a class="code" href="../../db/dc8/group___lua_surface_mesh_gabfd0722a36eedaee766f66d42ee532b8.html#gabfd0722a36eedaee766f66d42ee532b8">chiSurfaceMeshImportFromOBJFile</a>(newSurfMesh,</div><div class="line">        &quot;CHI_RESOURCES/TestObjects/SquareMesh2x2Quads.obj&quot;)</div><div class="line"></div><div class="line">-- Setup Region</div><div class="line">region1 = <a class="code" href="../../df/dda/group___lua_region_ga12d91bac4cbde16ef605143f6437e806.html#ga12d91bac4cbde16ef605143f6437e806">chiRegionCreate</a>()</div><div class="line"><a class="code" href="../../df/dda/group___lua_region_ga88d006b2cf5cf7021f9d0c64d30a156a.html#ga88d006b2cf5cf7021f9d0c64d30a156a">chiRegionAddSurfaceBoundary</a>(region1,newSurfMesh);</div><div class="line"></div><div class="line">-- Create meshers</div><div class="line"><a class="code" href="../../d1/d9b/group___lua_surface_mesher_ga7167fdac9f720677dc78a356ca1c391b.html#ga7167fdac9f720677dc78a356ca1c391b">chiSurfaceMesherCreate</a>(SURFACEMESHER_PREDEFINED);</div><div class="line"><a class="code" href="../../d4/d3a/group___lua_volume_mesher_ga49963c2a7ea611bc23ecab6e61dc4cb5.html#ga49963c2a7ea611bc23ecab6e61dc4cb5">chiVolumeMesherCreate</a>(VOLUMEMESHER_EXTRUDER);</div><div class="line"></div><div class="line">-- Setup extrusion layers</div><div class="line">subdivisions=3</div><div class="line"><a class="code" href="../../d4/d3a/group___lua_volume_mesher_ga877810586ad18728337d7cab842242a8.html#ga877810586ad18728337d7cab842242a8">chiVolumeMesherSetProperty</a>(EXTRUSION_LAYER,3.0,subdivisions,&quot;My Layer&quot;);</div><div class="line"></div><div class="line">--  Execute meshing</div><div class="line"><a class="code" href="../../d1/d9b/group___lua_surface_mesher_ga3e282401531b27d35df9c5d19f132b37.html#ga3e282401531b27d35df9c5d19f132b37">chiSurfaceMesherExecute</a>();</div><div class="line"><a class="code" href="../../d4/d3a/group___lua_volume_mesher_gaaa70b33a0935af1be76df133113fb7f4.html#gaaa70b33a0935af1be76df133113fb7f4">chiVolumeMesherExecute</a>();</div><div class="line"></div><div class="line">material = <a class="code" href="../../d7/d11/group___lua_physics_materials_ga8d13197b28523323399a61ecbe703ba7.html#ga8d13197b28523323399a61ecbe703ba7">chiPhysicsAddMaterial</a>(&quot;Test Material&quot;);</div><div class="line"></div><div class="line">-- Set Material IDs</div><div class="line">vol0 = <a class="code" href="../../d9/d32/group___lua_logic_volumes_gad12fbbcc9338d45e2085811244e121cb.html#gad12fbbcc9338d45e2085811244e121cb">chiLogicalVolumeCreate</a>(RPP,-1000,1000,-1000,1000,-1000,1000)</div><div class="line"><a class="code" href="../../d4/d3a/group___lua_volume_mesher_ga877810586ad18728337d7cab842242a8.html#ga877810586ad18728337d7cab842242a8">chiVolumeMesherSetProperty</a>(MATID_FROMLOGICAL,vol0,material)</div><div class="line"></div><div class="line">-- Export visualization</div><div class="line"><a class="code" href="../../df/dda/group___lua_region_gadf6f74ed713e24ef8c44516fc2a44772.html#gadf6f74ed713e24ef8c44516fc2a44772">chiRegionExportMeshToObj</a>(region1,&quot;Tutorial01Mesh.obj&quot;,true)</div><div class="line"></div><div class="line">--<span class="preprocessor">############################################### Add material properties</span></div><div class="line"></div><div class="line"></div><div class="line">-- Set material properties</div><div class="line"><a class="code" href="../../d7/d11/group___lua_physics_materials_gaca0d6b0498258b0bbedcf9f3c13a30ed.html#gaca0d6b0498258b0bbedcf9f3c13a30ed">chiPhysicsMaterialAddProperty</a>(material,SCALAR_VALUE,<span class="stringliteral">&quot;k&quot;</span>)</div><div class="line"><a class="code" href="../../d7/d11/group___lua_physics_materials_ga2f1cdfe3dc85457d4fc4780d37e73270.html#ga2f1cdfe3dc85457d4fc4780d37e73270">chiPhysicsMaterialSetProperty</a>(material,&quot;k&quot;,SINGLE_VALUE,1.0)</div><div class="line"></div><div class="line"><a class="code" href="../../d7/d11/group___lua_physics_materials_gaca0d6b0498258b0bbedcf9f3c13a30ed.html#gaca0d6b0498258b0bbedcf9f3c13a30ed">chiPhysicsMaterialAddProperty</a>(material,SCALAR_VALUE,&quot;q&quot;)</div><div class="line"><a class="code" href="../../d7/d11/group___lua_physics_materials_ga2f1cdfe3dc85457d4fc4780d37e73270.html#ga2f1cdfe3dc85457d4fc4780d37e73270">chiPhysicsMaterialSetProperty</a>(material,&quot;q&quot;,SINGLE_VALUE,1.0)</div><div class="line"></div><div class="line"></div><div class="line">--<span class="preprocessor">############################################### Setup Physics</span></div><div class="line">phys1 = <a class="code" href="../../de/d15/group___lua_diffusion_gae447e896898d4d16fa54a1338511eeb5.html#gae447e896898d4d16fa54a1338511eeb5">chiDiffusionCreateSolver</a>();</div><div class="line"><a class="code" href="../../dc/d4e/group___lua_solver_ga15162e7e9864bb9dcf30de0ce04a6803.html#ga15162e7e9864bb9dcf30de0ce04a6803">chiSolverAddRegion</a>(phys1,region1)</div><div class="line"><a class="code" href="../../de/d15/group___lua_diffusion_ga5c6d2bdff1c9301cd13d0c5e9f22f763.html#ga5c6d2bdff1c9301cd13d0c5e9f22f763">chiDiffusionSetProperty</a>(phys1,DISCRETIZATION_METHOD,PWLC);</div><div class="line"><a class="code" href="../../de/d15/group___lua_diffusion_ga5c6d2bdff1c9301cd13d0c5e9f22f763.html#ga5c6d2bdff1c9301cd13d0c5e9f22f763">chiDiffusionSetProperty</a>(phys1,RESIDUAL_TOL,1.0e-4)</div><div class="line"></div><div class="line">-- Initialize and Execute Solver</div><div class="line"><a class="code" href="../../de/d15/group___lua_diffusion_ga2ddcaaab893f78dc401a4cb7d53d7e09.html#ga2ddcaaab893f78dc401a4cb7d53d7e09">chiDiffusionInitialize</a>(phys1)</div><div class="line"><a class="code" href="../../de/d15/group___lua_diffusion_ga0bbc893ec4d87ff00001daf2290bbe68.html#ga0bbc893ec4d87ff00001daf2290bbe68">chiDiffusionExecute</a>(phys1)</div></div><!-- fragment --><h2>Step 11 - Execute the code</h2>
<p>Assuming you added the executable to your PATH environment variable, the code can be executed by typing the executable name followed by the input file path (relative or absolute).</p>
<pre class="fragment">ChiTech Tutorial01.lua
</pre><p>The output produced will look as follows:</p>
<pre class="fragment">[0]  ChiTech batch mode with 1 processes.
[0]  VolumeMesherExtruder executed
[0]  VolumeMesherExtruder: Extruding cells
[0]  VolumeMesherExtruder: Cells extruded = 3072
[0]  VolumeMesherExtruder: Number of cells in region = 3072
[0]  VolumeMesherExtruder: Number of nodes in region = 4356
[0]  chiVolumeMesherExecute: Volume meshing completed. Memory used = 5.82 MB
[0]  Total process memory used after meshing 14.3 MB
[0]  Exported Material Volume mesh to Tutorial01Mesh_m0.obj
[0]  Initializing Diffusion solver PETSc
[0]  Dirichlet boundary added (index 0).
[0]  Reflecting boundary added (index 1).
[0]  Reflecting boundary added (index 2).
[0]  Computing nodal reorderings for CFEM
[0]  Time taken during nodal reordering 0.003423
[0]  Determining nodal connections
[0]  Time taken during nodal connection 0.008049
[0]  Computing cell matrices
[0]  Setting matrix preallocation.
[0]  Solver initialization time 0.69799
[0]  Diffusion Solver: Assembling A and b
[0]  Diffusion Solver: Local matrix instructions
[0]  Diffusion Solver: Communicating matrix assembly
[0]  Diffusion Solver: Solving system
[0]  Diffusion iteration    0 - Residual 9.1664344
[0]  Diffusion iteration    1 - Residual 0.1777589
[0]  Diffusion iteration    2 - Residual 9.589e-03
[0]  Diffusion iteration    3 - Residual 4.001e-03
[0]  Diffusion iteration    4 - Residual 7.263e-04
[0]  Diffusion iteration    5 - Residual 7.460e-05
[0]  Convergence reason: 3
[0]  Diffusion Solver: Number of iterations =5
[0]  Timing:
[0]  Assembling the matrix: 0.012567
[0]  Solving the system   : 0.052297
Diffusion Solver execution completed!
</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">index</a></li><li class="navelem"><a class="el" href="../../d8/d2d/_tutorial00.html">Tutorials</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
