<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.19"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Chi-Tech: Diffusion</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Logo2_Small.bmp"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Chi-Tech
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('de/d15/group___lua_diffusion.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Diffusion<div class="ingroups"><a class="el" href="../../da/da3/group___lua_modules.html">F Code modules</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4661906375715ffd49f89661611a5616"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d15/group___lua_diffusion.html#ga4661906375715ffd49f89661611a5616">chi_lua::chiDiffusionSetProperty</a> (int SolverHandle, int PropertyIndex, varying Values)</td></tr>
<tr class="separator:ga4661906375715ffd49f89661611a5616"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab1d05b1f49195f0dff6fdf547687d3a3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d15/group___lua_diffusion.html#gab1d05b1f49195f0dff6fdf547687d3a3">chi_lua::chiDiffusionCreateSolver</a> ()</td></tr>
<tr class="separator:gab1d05b1f49195f0dff6fdf547687d3a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac15363c48408c09e0cd6e86e228b2d4c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d15/group___lua_diffusion.html#gac15363c48408c09e0cd6e86e228b2d4c">chi_lua::chiDiffusionInitialize</a> (int SolverHandle)</td></tr>
<tr class="separator:gac15363c48408c09e0cd6e86e228b2d4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac1664475091499ba78ac2dea8f1ec81f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d15/group___lua_diffusion.html#gac1664475091499ba78ac2dea8f1ec81f">chi_lua::chiDiffusionExecute</a> (int SolverHandle)</td></tr>
<tr class="separator:gac1664475091499ba78ac2dea8f1ec81f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Please consult the whitepaper for this solver (<a href="../../../../whitepages/DiffusionSolver/DiffusionSolver.pdf">Diffusion Whitepaper</a>). This solver solves the general diffusion equation of the form</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{equation} -\nabla D \nabla \phi + \sigma_a \phi = q. \end{equation}" src="../../form_15.png"/>
</p>
<p>Given a discretization method this solver will assemble the matrix <img class="formulaInl" alt="$ A $" src="../../form_16.png"/> using a system of linear equations. The solver can operate on 1D slabs, 2D polygon meshes and 3D polyhedron meshes. Currently two spatial discretization schemes are supported, Piecewise Linear Continous (PWLC) and Piecewise Linear Discontinous (PWLD) using the Modified Interior Penalty (MIP) method. The solver is fully parallel (using PETSc).</p>
<p>Boundary conditions are specified by referencing unique boundary id's. i.e. assuming one uses the extruder mesher the template boundary would've been assigned to index 0 and this will be transfused to all the boundaries in the lateral periphery. The top and bottom boundaries are flat for extruded geometries and therefore are assigned their own id's. In the extruded case the last boundary index is always assigned to the top boundary and second-to-last boundary index is always assigned to the bottom boundary. Boundary types are specified using the ChiLua::chiDiffusionSetProperty function call, using the BOUNDARY_TYPE property index.</p>
<p>The materials and source values are for now obtained from materials associated with cells. The default property mapping is shown below. If the property at index [1] (which is mapped to the source value q) is not available the source will default to a constant value of 1.0.</p>
<div class="image">
<img src="../../DiffusionMatProp.png" alt="" width="500px"/>
</div>
<p>To change the mapping of the properties the user needs to make a call to ChiLua::chiDiffusionSetProperty using the PROPERTY_D_MAP, PROPERTY_Q_MAP or PROPERTY_SIGMAA_MAP property index.</p>
<p>By default the solver populates a scalar field function which is the solution <img class="formulaInl" alt="$ \phi $" src="../../form_10.png"/>. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gab1d05b1f49195f0dff6fdf547687d3a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab1d05b1f49195f0dff6fdf547687d3a3">&#9670;&nbsp;</a></span>chiDiffusionCreateSolver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int chi_lua::chiDiffusionCreateSolver </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a Diffusion solver. </p><dl class="section return"><dt>Returns</dt><dd>Handle int Handle to the created solver.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Jan </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d47/lua__functions_8c_source.html#l01278">1278</a> of file <a class="el" href="../../d7/d47/lua__functions_8c_source.html">lua_functions.c</a>.</p>

</div>
</div>
<a id="gac1664475091499ba78ac2dea8f1ec81f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac1664475091499ba78ac2dea8f1ec81f">&#9670;&nbsp;</a></span>chiDiffusionExecute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int chi_lua::chiDiffusionExecute </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>SolverHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the Diffusion solver.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SolverHandle</td><td>int Handle to an existing diffusion solver. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Success bool Returns if initialization failed.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Jan </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d47/lua__functions_8c_source.html#l01294">1294</a> of file <a class="el" href="../../d7/d47/lua__functions_8c_source.html">lua_functions.c</a>.</p>

</div>
</div>
<a id="gac15363c48408c09e0cd6e86e228b2d4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac15363c48408c09e0cd6e86e228b2d4c">&#9670;&nbsp;</a></span>chiDiffusionInitialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int chi_lua::chiDiffusionInitialize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>SolverHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the Diffusion solver.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SolverHandle</td><td>int Handle to an existing diffusion solver. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Success bool Returns if initialization failed.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Jan </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d47/lua__functions_8c_source.html#l01286">1286</a> of file <a class="el" href="../../d7/d47/lua__functions_8c_source.html">lua_functions.c</a>.</p>

</div>
</div>
<a id="ga4661906375715ffd49f89661611a5616"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4661906375715ffd49f89661611a5616">&#9670;&nbsp;</a></span>chiDiffusionSetProperty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int chi_lua::chiDiffusionSetProperty </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>SolverHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>PropertyIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">varying&#160;</td>
          <td class="paramname"><em>Values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets a property of a Diffusion solver. Please also consult the whitepaper for the Diffusion solver (<a href="../../../../whitepages/DiffusionSolver/DiffusionSolver.pdf">Diffusion Whitepaper</a>) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SolverHandle</td><td>int Handle to an existing diffusion solver. </td></tr>
    <tr><td class="paramname">PropertyIndex</td><td>int Code for a specific property. </td></tr>
    <tr><td class="paramname">Values</td><td>varying Number of inputs associated with the index.<br  />
 <h2>_</h2>
</td></tr>
  </table>
  </dd>
</dl>
<h3>PropertyIndex\n</h3>
<p>DISCRETIZATION_METHOD<br  />
 Discretization method. Expects to be followed by <b>DiscretizationMethod</b> (see below).<br  />
<br  />
MAX_ITERS<br  />
 Solver maximum number of iterations.<br  />
<br  />
RESIDUAL_TOL<br  />
 Residual tolerance. Expects to be followed by a floating point value (i.e. 1.0e-6).<br  />
<br  />
BOUNDARY_TYPE<br  />
 Boundary type. Expects boundary index then <b>BoundaryTypeIndex</b> then type value.<br  />
<br  />
PROPERTY_D_MAP<br  />
 Followed by an integer, sets the property index of a material from where the solver will collect the diffusion coefficient.<br  />
<br  />
PROPERTY_Q_MAP<br  />
 Followed by an integer, sets the property index of a material from where the solver will collect the volumetric source value.<br  />
<br  />
PROPERTY_SIGMAA_MAP<br  />
 Followed by an integer, sets the property index of a material from where the solver will collect the absorbtion cross-section <img class="formulaInl" alt="$ \sigma_a $" src="../../form_7.png"/>.<br  />
<br  />
</p><div class="fragment"><div class="line"><a class="code" href="../../de/d15/group___lua_diffusion.html#ga4661906375715ffd49f89661611a5616">chiDiffusionSetProperty</a>(solver,BOUNDARY_TYPE,2,<a class="code" href="../../da/d6e/chi__diffusion__bndry_8h.html#a8ccc6d9ea450f3eafb5b2fad8368d857">DIFFUSION_DIRICHLET</a>,1.0)</div>
</div><!-- fragment --> <h3>DiscretizationMethod\n</h3>
<p>PWLC<br  />
 Piecewise Linear Finite Element Continuous.<br  />
<br  />
 PWLD_MIP<br  />
 Piecewise Linear Finite Element Discontinuous using the Modified Interior Penalty (MIP) method.<br  />
<br  />
</p><h3>BoundaryTypeIndex</h3>
<p>DIFFUSION_REFLECTING Reflecting boundary conditions. Synonymous with Neumann with a derivative of 0.0. </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ -D \hat{n}\cdot \nabla \phi = 0 \]" src="../../form_8.png"/>
</p>
<p><br  />
<br  />
DIFFUSION_DIRICHLET<br  />
 Constant value boundary condition. Expects to be followed by a value <img class="formulaInl" alt="$ f $" src="../../form_9.png"/> associated with <img class="formulaInl" alt="$ \phi $" src="../../form_10.png"/>. </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \phi = f \]" src="../../form_11.png"/>
</p>
<p><br  />
<br  />
DIFFUSION_NEUMANN<br  />
 Constant derivative boundary condition. Expects to be followed by a constant <img class="formulaInl" alt="$ f $" src="../../form_9.png"/> representing </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ -D \hat{n}\cdot \nabla \phi = f \]" src="../../form_12.png"/>
</p>
<p><br  />
<br  />
DIFFUSION_VACUUM<br  />
 Vacuum boundary conditions. More appropriate to neutron diffusion. </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \frac{1}{4}\phi + \frac{1}{2} D \hat{n}\cdot \nabla \phi = 0 \]" src="../../form_13.png"/>
</p>
<p><br  />
<br  />
DIFFUSION_ROBIN<br  />
 Robin boundary condition of the form </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ a \phi + b D \hat{n}\cdot \nabla \phi = f \]" src="../../form_14.png"/>
</p>
<p><br  />
<br  />
 </p><dl class="section author"><dt>Author</dt><dd>Jan </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d47/lua__functions_8c_source.html#l01225">1225</a> of file <a class="el" href="../../d7/d47/lua__functions_8c_source.html">lua_functions.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="achi__diffusion__bndry_8h_html_a8ccc6d9ea450f3eafb5b2fad8368d857"><div class="ttname"><a href="../../da/d6e/chi__diffusion__bndry_8h.html#a8ccc6d9ea450f3eafb5b2fad8368d857">DIFFUSION_DIRICHLET</a></div><div class="ttdeci">#define DIFFUSION_DIRICHLET</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d6e/chi__diffusion__bndry_8h_source.html#l00007">chi_diffusion_bndry.h:7</a></div></div>
<div class="ttc" id="agroup___lua_diffusion_html_ga4661906375715ffd49f89661611a5616"><div class="ttname"><a href="../../de/d15/group___lua_diffusion.html#ga4661906375715ffd49f89661611a5616">chi_lua::chiDiffusionSetProperty</a></div><div class="ttdeci">int chiDiffusionSetProperty(int SolverHandle, int PropertyIndex, varying Values)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d47/lua__functions_8c_source.html#l01225">lua_functions.c:1225</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.19 </li>
  </ul>
</div>
</body>
</html>
