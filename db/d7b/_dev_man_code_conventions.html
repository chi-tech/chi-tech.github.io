<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Chi-Tech: Coding conventions</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Logo2_Small.bmp"/></td>
  <td id="projectalign">
   <div id="projectname">Chi-Tech
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('db/d7b/_dev_man_code_conventions.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Coding conventions </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sec0"></a>
Coding conventions</h1>
<p >In general we follow the <a href="https://google.github.io/styleguide/cppguide.html">Google C++ style guide</a>. We now will dictate a few specific items. Refer to the image below for different text case-namings: </p><div class="image">
<img src="../../Cases.png" alt="" width="220px"/>
<div class="caption">
Different case names and how they look</div></div>
<p> <br  />
<br  />
 Let us say it here explicitly, <b>all variable-, function-, method- names should be descriptive</b>, avoid abbreviation, rather sacrifice horizontal space for readability.</p>
<h2><a class="anchor" id="devman1_sec0_1"></a>
File names</h2>
<ul>
<li><b>Filenames</b> should be all lower case and may include "_" underscores. i.e. <a class="el" href="../../d4/dca/chi__tech__main_8cc.html">chi_tech_main.cc</a>. snake_case is preferred.</li>
<li>Do not uses dashes <code>-</code> in file names</li>
<li>Do not uses dashes spaces in file names (Them Windows users!)</li>
<li>Do not use filenames that already exist in <code>/usr/include</code></li>
<li>In general, make your filenames very specific. For example, use <code>http_server_logs.h</code> rather than <code>logs.h</code>. A very common case is to have a pair of files called, e.g., <code>foo_bar.h</code> and <code>foo_bar.cc</code>, defining a class called <code>FooBar</code></li>
<li>Header files have a <code>.h</code> extension, c/c++ code files have a <code>.cc</code> extension.</li>
<li>Classes and Categorical functions should be contained in their own folder unless they are simple.</li>
<li>Folder depth shall be kept to a minimum and not exceed a depth of 3 sub-levels unless very well justified, i.e. <code>math/Discretization/PWL</code></li>
<li>Within a class folder the class declaration must be contained in its own header file. Exceptions to this are allowed for templates and in-line functions</li>
<li>When the member methods/functions become very large, consider functionally splitting them. I.e. use:<ul>
<li>classname_00_constrdestr.cc for the constructor and destructor</li>
<li>classname_01_init.cc for an initialize call</li>
<li>classname_02_ops.cc for numerous small operations.</li>
</ul>
</li>
</ul>
<div class="image">
<img src="../../DevMan_Filenames.png" alt="" width="300px"/>
<div class="caption">
Example 1</div></div>
<ul>
<li>If the class is really small then it should have a header file and an associated .cc file</li>
</ul>
<div class="image">
<img src="../../DevMan_Filenames1.png" alt="" width="350px"/>
<div class="caption">
Example 2</div></div>
<h2><a class="anchor" id="devman1_sec0_2"></a>
General code</h2>
<ul>
<li><b>Variables</b> use snake_case, must use lower case and include "_" between words. i.e. num_faces. Variable must not start or end with an underscore.</li>
<li><b>class Members</b> same as variables but with a trailing "_". <code>struct</code> members do not need trailing underscores. See more about this below.</li>
<li><b>Namespaces</b> use snake_case, should be lower case and may include underscores</li>
<li><b>FunctionNames</b> use PascalCase, have no underscores and each word starts with a capital letter. Underscores can be allowed in some circumstances.</li>
<li><b>Classes, structures, and types</b> use PascalCase, have each word start with a capital letter. For example chi_mesh::Vector is a structure called Vector and is defined in the namespace <a class="el" href="../../d0/d81/namespacechi__mesh.html">chi_mesh</a>.</li>
<li><b>enums and constants</b> use SCREAMING_SNAKE_CASE.</li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> good_variable_name;    <span class="comment">// Good variable name</span></div>
<div class="line"><span class="keywordtype">int</span> bvm;                   <span class="comment">// Bad variable name</span></div>
<div class="line"><span class="keywordtype">int</span> DontUseThisName;       <span class="comment">// Do not name variables with capital</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> ThisIsAFunctionName(<span class="keywordtype">int</span> parameter1)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>CoolDataStructure     <span class="comment">// Standalone class declaration</span></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  <span class="keywordtype">int</span> data;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>my_space            <span class="comment">// Namespace definition</span></div>
<div class="line">{</div>
<div class="line">  <span class="keyword">class </span>CoolerDataStructure;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>my_space::CoolerDataStructure</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  <span class="keywordtype">int</span> data;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>my_space::CoolerDataStructure {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  <span class="keywordtype">int</span> data;</div>
<div class="line">};</div>
</div><!-- fragment --><h2>More on Class member conventions</h2>
<ul>
<li>All class members should be named the same as regular variables, but with a trailing underscore ('_'), e.g., <code>cell.centroid_</code>.</li>
<li><code>struct</code> members should NOT be followed by an underscore.</li>
<li>Strongly consider making all class members <code>private/protected</code> unless<ul>
<li>They are <code>const</code>.</li>
<li>They cause a sensitivity to speed, e.g., <code>chi_mesh::cell</code> does not have accessor functions because <code>cell.vertex_ids_</code> is faster than <code>cell.GetVertexIDs()</code></li>
</ul>
</li>
<li>References to <code>private/protected</code> members should be obtained with a method call. A recommended convention is starting the method call with <code>Get</code>, e.g., <code>object.member</code> should be referenced with <code>object.GetMember()</code>. This is only guidance. It is perfectly fine to have <code>object.Member()</code> or anything that makes sense for the given use case.</li>
<li>Use <code>const</code> and non-<code>const</code> getters judicially. Favor using setters over non-const reference if possible, e.g., setting a single value can be done with <code>GetSingleValue</code>/<code>SetSingleValue</code>, however, vector manipulation might be better done with <code>GetVector</code> followed by manipulations.</li>
</ul>
<h2><a class="anchor" id="devman1_sec0_3"></a>
Tabs, spaces and braces</h2>
<p >In order to save horizontal space standard indents are to be 2 spaces instead of 4 space equivalent tabs. Other than this the convention is flexible.<br  />
<br  />
 Curly braces, parentheses and block braces does not have a specific requirement other than being used in a sense that is optimal with respect to readibility.<br  />
<br  />
 Generally we require that code span a maximum of 80 characters. This is not a hard rule but will greatly enhance code reliability. Especially in split-screen configurations.</p>
<h2><a class="anchor" id="devman1_sec0_4"></a>
Constants and Enumerators</h2>
<p >Constants should look like macros. Constants can be defined in macros, enumerations or within code segments.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define   PI       3.1415926535898</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> DEFAULT_SETTING1   = 1;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> AlternateUrlTableErrors {</div>
<div class="line">  OK = 0,</div>
<div class="line">  OUT_OF_MEMORY = 1,</div>
<div class="line">  MALFORMED_INPUT = 2,</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="devman1_sec0_5"></a>
Comments</h2>
<p >Be consistent in using comments. Comments should be clear and concise and convey the algorithm. Every class, structure or function should be supplied with doxygen comment styles at the top of the item.</p>
<div class="fragment"></div><!-- fragment --><h2>Annotating Class-declerations:</h2>
<p ><b>MAXIMIZE SCOPE MINIMIZE SPACE</b>. Class declerations must always happen within header files and should aim to provide the maximum amount of scope <b>within the minimum amount of vertical space.</b> Member variables/structures should be on the top portion of the class decleration and methods should be on the bottom.</p>
<h1><a class="anchor" id="devman1_sec1"></a>
Header files</h1>
<ul>
<li>Avoid using header files for code definition. Use only for struct/class/function declaration</li>
<li>Use <b>#ifdef</b> guards on all header files</li>
<li>Avoid using forward declarations. Use header files instead.</li>
<li>Maintain a consistent order of include files.</li>
</ul>
<h2><a class="anchor" id="devman1_sec1_1"></a>
General rules</h2>
<p >Header files are primarily used to make function/class/struct declarations available to other compile units without the need to compile the associated definitions. Unless you have a good reason to do so, do not define code within header files. It results in extra compile times and is considered not good practice. Of course there are exceptions like templating but in general code definitions should be contained in .cc files, <b>header files are for code declaration only</b>.</p>
<h2><a class="anchor" id="devman1_sec1_2"></a>
The #ifndef guard</h2>
<p >All header files should have #define guards to prevent multiple inclusion. The format of the symbol name should be _&lt;CATEGORY&gt;_&lt;FILE&gt;<em>H</em>. To guarantee uniqueness, they should be based on the full path in a project's source tree. For example, the file foo/src/bar/baz.h in project foo should have the following guard:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef FOO_BAR_BAZ_H_</span></div>
<div class="line"><span class="preprocessor">#define FOO_BAR_BAZ_H_</span></div>
<div class="line"> </div>
<div class="line">...</div>
<div class="line"> </div>
<div class="line">#endif  <span class="comment">// FOO_BAR_BAZ_H_</span></div>
</div><!-- fragment --><h2><a class="anchor" id="devman1_sec1_3"></a>
Forward declarations</h2>
<p >Avoid using forward declarations where possible. Just #include the headers you need.</p>
<h1><a class="anchor" id="devman1_sec2"></a>
Namespace hell and typedefinitions</h1>
<p ><b>Don't use the "using namespace" directive</b>. Rather rename groups of namespaces. Use "typedef" where appropriate.</p>
<div class="fragment"><div class="line"><span class="comment">// Forbidden -- This pollutes the namespace.</span></div>
<div class="line"><span class="keyword">using namespace </span>foo;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Shorten access to some commonly used names in .cc files.</span></div>
<div class="line"><span class="keyword">namespace </span>baz = ::foo::bar::baz;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Type definition for each cell there is a pair, number of faces and</span></div>
<div class="line"><span class="comment">// face areas for each face</span></div>
<div class="line"><span class="keyword">typedef</span> std::vector&lt;std::pair&lt;int, std::vector&lt;double&gt;&gt;&gt; CellFaceAreas;</div>
<div class="line"> </div>
<div class="line">CellFaceAreas cell_face_areas;</div>
</div><!-- fragment --><h1><a class="anchor" id="devman1_sec3"></a>
Other general items</h1>
<h2><a class="anchor" id="devman1_sec3_0"></a>
Line length</h2>
<p >Each line of text in your code should be at most 80 characters long. A line may exceed 80 characters if it is</p>
<ul>
<li>a comment line which is not feasible to split without harming readability, ease of cut and paste or auto-linking &ndash; e.g. if a line contains an example command or a literal URL longer than 80 characters.</li>
<li>a raw-string literal with content that exceeds 80 characters. Except for test code, such literals should appear near the top of a file.</li>
<li>an include statement.</li>
<li>a header guard</li>
</ul>
<h2><a class="anchor" id="devman1_sec3_1"></a>
Boolean expressions</h2>
<p >When you have a boolean expression that is longer than the standard line length, be consistent in how you break up the lines.</p>
<p >In this example, the logical AND operator is always at the end of the lines:</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (this_one_thing &gt; this_other_thing &amp;&amp;</div>
<div class="line">    a_third_thing == a_fourth_thing &amp;&amp;</div>
<div class="line">    yet_another &amp;&amp; last_one) {</div>
<div class="line">  ...</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="devman1_sec3_2"></a>
Constructor Initializer lists</h2>
<p >Constructor initializer lists can be all on one line or with subsequent lines indented four spaces.</p>
<p >The acceptable formats for initializer lists are:</p>
<div class="fragment"><div class="line"><span class="comment">// When everything fits on one line:</span></div>
<div class="line">MyClass::MyClass(<span class="keywordtype">int</span> var) : some_var_(var) {</div>
<div class="line">  DoSomething();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// If the signature and initializer list are not all on one line,</span></div>
<div class="line"><span class="comment">// you must wrap before the colon and indent 4 spaces:</span></div>
<div class="line">MyClass::MyClass(<span class="keywordtype">int</span> var)</div>
<div class="line">    : some_var_(var), some_other_var_(var + 1) {</div>
<div class="line">  DoSomething();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// When the list spans multiple lines, put each member on its own line</span></div>
<div class="line"><span class="comment">// and align them:</span></div>
<div class="line">MyClass::MyClass(<span class="keywordtype">int</span> var)</div>
<div class="line">    : some_var_(var),             <span class="comment">// 4 space indent</span></div>
<div class="line">      some_other_var_(var + 1) {  <span class="comment">// lined up</span></div>
<div class="line">  DoSomething();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// As with any other code block, the close curly can be on the same</span></div>
<div class="line"><span class="comment">// line as the open curly, if it fits.</span></div>
<div class="line">MyClass::MyClass(<span class="keywordtype">int</span> var)</div>
<div class="line">    : some_var_(var) {}</div>
</div><!-- fragment --><h2><a class="anchor" id="devman1_sec3_3"></a>
Operators</h2>
<p >Spacing between operators is flexible.</p>
<div class="fragment"><div class="line"><span class="comment">// Assignment operators always have spaces around them.</span></div>
<div class="line">x = 0;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Other binary operators usually have spaces around them, but it&#39;s</span></div>
<div class="line"><span class="comment">// OK to remove spaces around factors.  Parentheses should have no</span></div>
<div class="line"><span class="comment">// internal padding.</span></div>
<div class="line">v = w * x + y / z;</div>
<div class="line">v = w*x + y/z;</div>
<div class="line">v = w * (x + z);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// No spaces separating unary operators and their arguments.</span></div>
<div class="line">x = -5;</div>
<div class="line">++x;</div>
<div class="line"><span class="keywordflow">if</span> (x &amp;&amp; !y)</div>
<div class="line">  ...</div>
</div><!-- fragment --><h2><a class="anchor" id="devman1_sec3_4"></a>
Templates</h2>
<div class="fragment"><div class="line"><span class="comment">// No spaces inside the angle brackets (&lt; and &gt;), before</span></div>
<div class="line"><span class="comment">// &lt;, or between &gt;( in a cast</span></div>
<div class="line">std::vector&lt;string&gt; x;</div>
<div class="line">y = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(x);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Spaces between type and pointer are OK, but be consistent.</span></div>
<div class="line">std::vector&lt;char *&gt; x;</div>
</div><!-- fragment --><h2><a class="anchor" id="devman1_sec3_5"></a>
Casting</h2>
<p >In general there are three variants of casting; C-style casting, <code>static_cast</code> and <code>dynamic_cast</code>.</p>
<div class="fragment"><div class="line"><span class="keywordtype">double</span> aa = 10.5;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">float</span> a = (float)aa;               <span class="comment">// C-style (Use only for numerics)</span></div>
<div class="line"><span class="keywordtype">float</span> b = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(aa);  <span class="comment">// static_cast</span></div>
<div class="line"><span class="keywordtype">float</span> c = <span class="keyword">dynamic_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(aa); <span class="comment">// dynamic_cast</span></div>
</div><!-- fragment --><p >The difference between the 3 are as follows: C-style casting is a brute-force way of casting one type into another. In most, if not all cases, the compiler will not provide any protection against casts that will be illegal. The better alternative is to use <code>static_cast</code> which will allow the compiler to determine whether the cast would be legal in a broad scope sense (i.e. casting parent pointer to child pointer). If the user needs to check for a valid cast, it is often better to use <code>dynamic_cast</code> which will return null if the cast is illegal, however, be aware that this uses RTTI and therefore has some cost. The following conventions therefore apply:</p>
<ul>
<li>Use C-style casting only for numerical values</li>
<li>Objects and structures should use either <code>static_cast</code> or <code>dynamic_cast</code> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">Chi-Tech</a></li><li class="navelem"><a class="el" href="../../d7/db6/_programmer_manual.html">Developer&#39;s manual</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
