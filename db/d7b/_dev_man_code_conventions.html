<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Chi-Tech: Coding conventions</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Logo2_Small.bmp"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Chi-Tech
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('db/d7b/_dev_man_code_conventions.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Coding conventions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sec0"></a>
Coding conventions</h1>
<p>Let us say it here explicitly, <b>names should be descriptive</b>, avoid abbreviation, rather sacrifice horizontal space for readability.</p>
<h2><a class="anchor" id="devman1_sec0_1"></a>
File names</h2>
<ul>
<li><b>Classes</b> should be contained in their own folder unless they are simple.</li>
<li><b>Filenames</b> should be all lower case and may include "_" underscores. i.e. <a class="el" href="../../d4/dca/chi__tech__main_8cc_source.html">chi_tech_main.cc</a></li>
<li>Within a class folder the class declaration should be contained in its own header file.</li>
<li>When the member methods/functions become very large, consider functionally splitting them. I.e. use:<ul>
<li>classname_00_constrdestr.cc for the constructor and destructor</li>
<li>classname_01_init.cc for an initialize call</li>
<li>classname_02_ops.cc for numerous small operations.</li>
</ul>
</li>
</ul>
<div class="image">
<img src="../../devman_Filenames.png" alt="devman_Filenames.png" width="300px"/>
</div>
<ul>
<li><p class="startli">If the class is really small then it should have a header file and an associated .cc file</p>
<div class="image">
<img src="../../devman_Filenames1.png" alt="devman_Filenames1.png" width="350px"/>
</div>
</li>
</ul>
<h2><a class="anchor" id="devman1_sec0_2"></a>
General code</h2>
<ul>
<li><b>Variables</b> should use lower case and include "_" between words. i.e. num_faces.</li>
<li><b>Namespaces</b> should be lower case and may include underscores</li>
<li><b>FunctionNames</b> have no underscores and each word start with a capital letter.</li>
<li><b>Standalone classes and structures</b> should be all caps. For example <a class="el" href="../../d7/d93/class_c_h_i___d_i_s_c_r_e_t_i_z_a_t_i_o_n___p_w_l.html">CHI_DISCRETIZATION_PWL</a>.</li>
<li><b>General classes and structures</b> which are part of namespaces have each word start with a capital letter. For example <a class="el" href="../../da/d85/structchi__mesh_1_1_vector.html">chi_mesh::Vector</a> is a structure called Vector and is defined in the namespace <a class="el" href="../../d0/d81/namespacechi__mesh.html">chi_mesh</a>.</li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> good_variable_name;    <span class="comment">// Good variable name</span></div><div class="line"><span class="keywordtype">int</span> bvm;                   <span class="comment">// Bad variable name</span></div><div class="line"><span class="keywordtype">int</span> DontUseThisName;       <span class="comment">// Do not name variables with capital</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> ThisIsAFunctionName(<span class="keywordtype">int</span> parameter1)</div><div class="line">{</div><div class="line">  <span class="keywordflow">return</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">class </span>COOL_DATA_STRUCTURE     <span class="comment">// Standalone class declaration</span></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="keywordtype">int</span> data;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">namespace </span>my_space            <span class="comment">// Namespace definition</span></div><div class="line">{</div><div class="line">  <span class="keyword">class </span>CoolerDataStructure;</div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">class </span>my_space::CoolerDataStructure</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="keywordtype">int</span> data;</div><div class="line">};</div></div><!-- fragment --><h2><a class="anchor" id="devman1_sec0_3"></a>
Tabs and spaces</h2>
<p>In order to save horizontal space standard indents are to be 2 spaces instead of 4 space equivalent tabs. Other than this the convention is flexible.</p>
<h2><a class="anchor" id="devman1_sec0_4"></a>
Constants</h2>
<p>Constants should either look like variable names with a "k" prepended to them or look like macros. Constants can be defined in macros, enumerations or within code segments.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define   PI       3.1415926535898</span></div><div class="line"><span class="preprocessor">#define k_pi       3.1415926535898;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> DEFAULT_SETTING1   = 1;</div><div class="line"><span class="keywordtype">int</span> k_default_setting2 = 2;</div><div class="line"></div><div class="line"><span class="keyword">enum</span> UrlTableErrors {</div><div class="line">  kOK = 0,</div><div class="line">  kErrorOutOfMemory,</div><div class="line">  kErrorMalformedInput,</div><div class="line">};</div><div class="line"><span class="keyword">enum</span> AlternateUrlTableErrors {</div><div class="line">  OK = 0,</div><div class="line">  OUT_OF_MEMORY = 1,</div><div class="line">  MALFORMED_INPUT = 2,</div><div class="line">};</div></div><!-- fragment --><h2><a class="anchor" id="devman1_sec0_5"></a>
Comments</h2>
<p>Be consistent in using comments. Comments should be clear and concise and convey the algorithm. Every class, structure or function should be supplied with doxygen comment styles at the top of the item.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;CHI_LUA/chi_lua.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CHI_MODULES/CHI_DIFFUSION/Solver/diffusion_solver.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;CHI_PHYSICS/chi_physics.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">extern</span> <a class="code" href="../../d8/da5/class_c_h_i___p_h_y_s_i_c_s.html">CHI_PHYSICS</a> chi_physics_handler;</div><div class="line"></div><div class="line"><span class="comment">//#############################################################################</span></div><div class="line"><span class="comment"></span><span class="comment">/* Initialize the Diffusion solver.</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment">\param SolverHandle int Handle to an existing diffusion solver.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">\return Success bool Returns if initialization failed.</span></div><div class="line"><span class="comment">\ingroup LuaDiffusion</span></div><div class="line"><span class="comment">\author Jan*/</span></div><div class="line"><span class="keywordtype">int</span> <a class="code" href="../../de/d15/group___lua_diffusion_ga0bbc893ec4d87ff00001daf2290bbe68.html#ga0bbc893ec4d87ff00001daf2290bbe68">chiDiffusionExecute</a>(lua_State *L)</div><div class="line">{</div><div class="line">  <span class="keywordtype">int</span> solver_index = lua_tonumber(L,1);</div><div class="line">  <a class="code" href="../../d6/d32/classchi__diffusion_1_1_solver.html">chi_diffusion::Solver</a>* solver;</div><div class="line"></div><div class="line">  <span class="keywordflow">try</span>{</div><div class="line">    solver = (<a class="code" href="../../d6/d32/classchi__diffusion_1_1_solver.html">chi_diffusion::Solver</a>*)chi_physics_handler.<a class="code" href="../../d8/da5/class_c_h_i___p_h_y_s_i_c_s_a42c6c2e5bfa6b5e913f496c7ad955206.html#a42c6c2e5bfa6b5e913f496c7ad955206">solver_stack</a>.at(solver_index);</div><div class="line">  }</div><div class="line">  <span class="keywordflow">catch</span>(std::out_of_range o){</div><div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;ERROR: Invalid solver handle.&quot;</span> &lt;&lt; std::endl;</div><div class="line">    exit(EXIT_FAILURE);</div><div class="line">  }</div><div class="line"></div><div class="line">  solver-&gt;<a class="code" href="../../d6/d32/classchi__diffusion_1_1_solver_aaf627359dc9717744e0c8a5d792f66ea.html#aaf627359dc9717744e0c8a5d792f66ea">ExecuteS</a>();</div><div class="line"></div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="devman1_sec1"></a>
Header files</h1>
<ul>
<li>Avoid using header files for code definition. Use only for struct/class/function declaration</li>
<li>Use <b>#ifdef</b> guards on all header files</li>
<li>Avoid using forward declarations. Use header files instead.</li>
<li>Maintain a consistent order of include files.</li>
</ul>
<h2><a class="anchor" id="devman1_sec1_1"></a>
General rules</h2>
<p>Header files are primarily used to make function/class/struct declarations available to other compile units without the need to compile the associated definitions. Unless you have a good reason to do so, do not define code within header files. It results in extra compile times and is considered not good practice. Of course there are exceptions like templating but in general code definitions should be contained in .cc files, <b>header files are for code declaration only</b>.</p>
<h2><a class="anchor" id="devman1_sec1_2"></a>
The #ifndef guard</h2>
<p>All header files should have #define guards to prevent multiple inclusion. The format of the symbol name should be _&lt;CATEGORY&gt;_&lt;FILE&gt;_H_. To guarantee uniqueness, they should be based on the full path in a project's source tree. For example, the file foo/src/bar/baz.h in project foo should have the following guard:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef FOO_BAR_BAZ_H_</span></div><div class="line"><span class="preprocessor">#define FOO_BAR_BAZ_H_</span></div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">#endif  <span class="comment">// FOO_BAR_BAZ_H_</span></div></div><!-- fragment --><h2><a class="anchor" id="devman1_sec1_3"></a>
Forward declarations</h2>
<p>Avoid using forward declarations where possible. Just #include the headers you need.</p>
<h1><a class="anchor" id="devman1_sec2"></a>
Namespace hell and typedefinitions</h1>
<p><b>Don't use the "using namespace" directive</b>. Rather rename groups of namespaces. Use "typedef" where appropriate.</p>
<div class="fragment"><div class="line"><span class="comment">// Forbidden -- This pollutes the namespace.</span></div><div class="line"><span class="keyword">using namespace </span>foo;</div><div class="line"></div><div class="line"><span class="comment">// Shorten access to some commonly used names in .cc files.</span></div><div class="line"><span class="keyword">namespace </span>baz = ::foo::bar::baz;</div><div class="line"></div><div class="line"><span class="comment">// Type definition for each cell there is a pair, number of faces and</span></div><div class="line"><span class="comment">// face areas for each face</span></div><div class="line"><span class="keyword">typedef</span> std::vector&lt;std::pair&lt;int, std::vector&lt;double&gt;&gt;&gt; CellFaceAreas;</div><div class="line"></div><div class="line">CellFaceAreas cell_face_areas;</div></div><!-- fragment --><h1><a class="anchor" id="devman1_sec3"></a>
Other general items</h1>
<h2><a class="anchor" id="devman1_sec3_0"></a>
Line length</h2>
<p>Each line of text in your code should be at most 80 characters long. A line may exceed 80 characters if it is</p>
<ul>
<li>a comment line which is not feasible to split without harming readability, ease of cut and paste or auto-linking &ndash; e.g. if a line contains an example command or a literal URL longer than 80 characters.</li>
<li>a raw-string literal with content that exceeds 80 characters. Except for test code, such literals should appear near the top of a file.</li>
<li>an include statement.</li>
<li>a header guard</li>
</ul>
<h2><a class="anchor" id="devman1_sec3_1"></a>
Boolean expressions</h2>
<p>When you have a boolean expression that is longer than the standard line length, be consistent in how you break up the lines.</p>
<p>In this example, the logical AND operator is always at the end of the lines:</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (this_one_thing &gt; this_other_thing &amp;&amp;</div><div class="line">    a_third_thing == a_fourth_thing &amp;&amp;</div><div class="line">    yet_another &amp;&amp; last_one) {</div><div class="line">  ...</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="devman1_sec3_2"></a>
Constructor Initializer lists</h2>
<p>Constructor initializer lists can be all on one line or with subsequent lines indented four spaces.</p>
<p>The acceptable formats for initializer lists are:</p>
<div class="fragment"><div class="line"><span class="comment">// When everything fits on one line:</span></div><div class="line">MyClass::MyClass(<span class="keywordtype">int</span> var) : some_var_(var) {</div><div class="line">  DoSomething();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// If the signature and initializer list are not all on one line,</span></div><div class="line"><span class="comment">// you must wrap before the colon and indent 4 spaces:</span></div><div class="line">MyClass::MyClass(<span class="keywordtype">int</span> var)</div><div class="line">    : some_var_(var), some_other_var_(var + 1) {</div><div class="line">  DoSomething();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// When the list spans multiple lines, put each member on its own line</span></div><div class="line"><span class="comment">// and align them:</span></div><div class="line">MyClass::MyClass(<span class="keywordtype">int</span> var)</div><div class="line">    : some_var_(var),             <span class="comment">// 4 space indent</span></div><div class="line">      some_other_var_(var + 1) {  <span class="comment">// lined up</span></div><div class="line">  DoSomething();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// As with any other code block, the close curly can be on the same</span></div><div class="line"><span class="comment">// line as the open curly, if it fits.</span></div><div class="line">MyClass::MyClass(<span class="keywordtype">int</span> var)</div><div class="line">    : some_var_(var) {}</div></div><!-- fragment --><h2><a class="anchor" id="devman1_sec3_3"></a>
Operators</h2>
<p>Spacing between operators is flexible.</p>
<div class="fragment"><div class="line"><span class="comment">// Assignment operators always have spaces around them.</span></div><div class="line">x = 0;</div><div class="line"></div><div class="line"><span class="comment">// Other binary operators usually have spaces around them, but it&#39;s</span></div><div class="line"><span class="comment">// OK to remove spaces around factors.  Parentheses should have no</span></div><div class="line"><span class="comment">// internal padding.</span></div><div class="line">v = w * x + y / z;</div><div class="line">v = w*x + y/z;</div><div class="line">v = w * (x + z);</div><div class="line"></div><div class="line"><span class="comment">// No spaces separating unary operators and their arguments.</span></div><div class="line">x = -5;</div><div class="line">++x;</div><div class="line"><span class="keywordflow">if</span> (x &amp;&amp; !y)</div><div class="line">  ...</div></div><!-- fragment --><h2><a class="anchor" id="devman1_sec3_4"></a>
Templates and Casts</h2>
<div class="fragment"><div class="line"><span class="comment">// No spaces inside the angle brackets (&lt; and &gt;), before</span></div><div class="line"><span class="comment">// &lt;, or between &gt;( in a cast</span></div><div class="line">std::vector&lt;string&gt; x;</div><div class="line">y = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(x);</div><div class="line"></div><div class="line"><span class="comment">// Spaces between type and pointer are OK, but be consistent.</span></div><div class="line">std::vector&lt;char *&gt; x;</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">index</a></li><li class="navelem"><a class="el" href="../../d7/db6/_programmer_manual.html">Developer&#39;s manual</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
