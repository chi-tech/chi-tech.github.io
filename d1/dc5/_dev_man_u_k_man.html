<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Chi-Tech: The chi_math::UnknownManager</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Logo2_Small.bmp"/></td>
  <td id="projectalign">
   <div id="projectname">Chi-Tech
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d1/dc5/_dev_man_u_k_man.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">The <a class="el" href="../../d9/da7/classchi__math_1_1_unknown_manager.html">chi_math::UnknownManager</a> </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Table of contents</h2>
<ul>
<li><a class="el" href="../../d1/dc5/_dev_man_u_k_man.html#devmanA3_sec0">Introduction</a></li>
<li><a class="el" href="../../d1/dc5/_dev_man_u_k_man.html#devmanA3_sec1">1 Cells vs Vertices vs Nodes vs Degree-of-Freedom (DOF)</a></li>
<li><a class="el" href="../../d1/dc5/_dev_man_u_k_man.html#devmanA3_sec2">2 One DOF per node</a></li>
<li><a class="el" href="../../d1/dc5/_dev_man_u_k_man.html#devmanA3_sec3">3 Multiple DOFs Nodal ordering</a></li>
<li><a class="el" href="../../d1/dc5/_dev_man_u_k_man.html#devmanA3_sec4">4 Multiple DOFs Block ordering</a></li>
</ul>
<h1><a class="anchor" id="devmanA3_sec0"></a>
Introduction</h1>
<p >As a developer you might come across code such as </p><div class="fragment"><div class="line">imap[i] = sdm.MapDOF(cell, i);</div>
</div><!-- fragment --><p> or its more elaborate cousin </p><div class="fragment"><div class="line"><span class="keyword">const</span> int64_t imap = m_sdm.MapDOF(cell,i,m_uk_man,0,g);</div>
</div><!-- fragment --><p >The two function calls, <code>MapDOF</code> with 2 arguments and <code>MapDOF</code> with 5 arguments, are both methods of the base-class <code><a class="el" href="../../dd/d1d/classchi__math_1_1_spatial_discretization.html">chi_math::SpatialDiscretization</a></code>.</p>
<p >The two overloaded methods, <code><a class="el" href="../../dd/d1d/classchi__math_1_1_spatial_discretization.html#a6b8904300ab5bb7624c0521b11828272">chi_math::SpatialDiscretization::MapDOF</a></code> return the global index of a degree-of-freedom (DOF). The counterparts to <code>MapDOF</code> are the <code>MapDOFLocal</code> methods that provide the local index of a DOF.</p>
<p >These functions are called with either 2 arguments</p><ul>
<li>A cell reference</li>
<li>A cell-node local-index</li>
</ul>
<p >or with 5 arguments</p><ul>
<li>A cell reference</li>
<li>A cell-node local-index</li>
<li>An unknown-manager (<code><a class="el" href="../../d9/da7/classchi__math_1_1_unknown_manager.html">chi_math::UnknownManager</a></code>)</li>
<li>An unknown id</li>
<li>A component id</li>
</ul>
<h1><a class="anchor" id="devmanA3_sec1"></a>
1 Cells vs Vertices vs Nodes vs Degree-of-Freedom (DOF)</h1>
<p >These comparisons are conceptually simple. The geometry of a cell is described by its vertices (see Figure 1 below). The mesh cannot be completely defined without the vertices, therefore, cells always go hand-in-hand with vertices.</p>
<p >A spatial discretization (e.g., Finite Volume, PWL, Lagrange Q1, Lagrange Q2) places nodes on the mesh that may or may not coincide with some of the vertices. For example, the Finite Volume spatial discretization places a single node for each cell, at the cell's centroid (hence no coincidence with any vertex), whilst a Lagrange Q2 spatial discretization has some of its nodes on the vertices while other are not (see Figure 1 below).</p>
<div class="image">
<img src="../../UkManVertsNodes.png" alt="" width="600px"/>
<div class="caption">
Figure 1: Cells, vertices and nodes.</div></div>
<p >Where degrees-of-freedom differ from nodes is that each node can be stacked with a number of unknowns, e.g., one might have to solve a number of physical variables in a multiphysics simulation involving 2D velocity, <img class="formulaInl" alt="$ u_x $" src="../../form_352.png" width="17" height="11"/> and <img class="formulaInl" alt="$ u_y $" src="../../form_353.png" width="17" height="12"/>, a three energy group flux, <img class="formulaInl" alt="$ \phi_0, \ \phi_1, \ \phi_2 $" src="../../form_354.png" width="69" height="15"/>, and pressure, <img class="formulaInl" alt="$ p $" src="../../form_59.png" width="9" height="11"/>. One can stack these variables in any form, for example:</p><ul>
<li>Unknown 0, a 6 component vector containing <img class="formulaInl" alt="$ u_x, \ u_y, \ \phi_0, \ \phi_1, \ \phi_2 $" src="../../form_355.png" width="126" height="17"/>, and <img class="formulaInl" alt="$ p $" src="../../form_59.png" width="9" height="11"/></li>
</ul>
<p >or more elegantly</p><ul>
<li>Unknown 0, a 2 component vector containing <img class="formulaInl" alt="$ u_x $" src="../../form_352.png" width="17" height="11"/> and <img class="formulaInl" alt="$ u_y $" src="../../form_353.png" width="17" height="12"/></li>
<li>Unknown 1, a 3 component vector containing <img class="formulaInl" alt="$ \phi_0, \ \phi_1, \ \phi_2 $" src="../../form_354.png" width="69" height="15"/></li>
<li>Unknown 2, a single scalar (1 component) containing just <img class="formulaInl" alt="$ p $" src="../../form_59.png" width="9" height="11"/></li>
</ul>
<p >The latter essentially means that each node can have a number of unknowns stacked onto it as shown in Figure 2 below.</p>
<div class="image">
<img src="../../UkManNodeDOFs.png" alt="" width="300px"/>
<div class="caption">
Figure 2: Unknowns/DOFs stacked onto a node</div></div>
<p >The individual components of the unknowns are unique for every node and are called the degrees-of-freedom (DOFs).</p>
<h1><a class="anchor" id="devmanA3_sec2"></a>
2 One DOF per node</h1>
<p >All the spatial discretizations have a default unknown-manager, defined during initialization, called <code>UNITARY_UNKNOWN_MANAGER</code>. This allows the spatial discretization to map indices as shown in Figure 3 below</p>
<div class="image">
<img src="../../UkMan-OneDOFPN.png" alt="" width="800px"/>
<div class="caption">
Figure 3: Mapping One DOF per Node</div></div>
<h1><a class="anchor" id="devmanA3_sec3"></a>
3 Multiple DOFs Nodal ordering</h1>
<p >With multiple unknowns like the 2D velocity, multigroup flux, and pressure example above we can create an unknown manager with this structure as follows </p><div class="fragment"><div class="line"><a class="code hl_class" href="../../d9/da7/classchi__math_1_1_unknown_manager.html">chi_math::UnknownManager</a> uk_man;</div>
<div class="line">uk_man.<a class="code hl_function" href="../../d9/da7/classchi__math_1_1_unknown_manager.html#a07fb29a7555ba61bd0e22a584b4abb78">AddUnknown</a>(<a class="code hl_enumvalue" href="../../dc/d58/namespacechi__math.html#ad4724873fa5ae74b39c4657aa4f53d1da20760c37f74c5ecf95beeadd1407fbef">chi_math::UnknownType::VECTOR_2</a>);    <span class="comment">//u_x, u_y</span></div>
<div class="line">uk_man.<a class="code hl_function" href="../../d9/da7/classchi__math_1_1_unknown_manager.html#a07fb29a7555ba61bd0e22a584b4abb78">AddUnknown</a>(<a class="code hl_enumvalue" href="../../dc/d58/namespacechi__math.html#ad4724873fa5ae74b39c4657aa4f53d1dad7dc5b5f08aa4bc980c2f7e92a9046d4">chi_math::UnknownType::VECTOR_N</a>, 3); <span class="comment">//phi_0 to phi_2</span></div>
<div class="line">uk_man.<a class="code hl_function" href="../../d9/da7/classchi__math_1_1_unknown_manager.html#a07fb29a7555ba61bd0e22a584b4abb78">AddUnknown</a>(<a class="code hl_enumvalue" href="../../dc/d58/namespacechi__math.html#ad4724873fa5ae74b39c4657aa4f53d1da8f3d9a4b6a7b7f2c7afa61ca113d0db9">chi_math::UnknownType::SCALAR</a>);      <span class="comment">//pressure</span></div>
<div class="ttc" id="aclasschi__math_1_1_unknown_manager_html"><div class="ttname"><a href="../../d9/da7/classchi__math_1_1_unknown_manager.html">chi_math::UnknownManager</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d3b/unknown__manager_8h_source.html#l00107">unknown_manager.h:108</a></div></div>
<div class="ttc" id="aclasschi__math_1_1_unknown_manager_html_a07fb29a7555ba61bd0e22a584b4abb78"><div class="ttname"><a href="../../d9/da7/classchi__math_1_1_unknown_manager.html#a07fb29a7555ba61bd0e22a584b4abb78">chi_math::UnknownManager::AddUnknown</a></div><div class="ttdeci">unsigned int AddUnknown(UnknownType unk_type, unsigned int dimension=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d4c/unknown__manager_8cc_source.html#l00009">unknown_manager.cc:10</a></div></div>
<div class="ttc" id="anamespacechi__math_html_ad4724873fa5ae74b39c4657aa4f53d1da20760c37f74c5ecf95beeadd1407fbef"><div class="ttname"><a href="../../dc/d58/namespacechi__math.html#ad4724873fa5ae74b39c4657aa4f53d1da20760c37f74c5ecf95beeadd1407fbef">chi_math::UnknownType::VECTOR_2</a></div><div class="ttdeci">@ VECTOR_2</div></div>
<div class="ttc" id="anamespacechi__math_html_ad4724873fa5ae74b39c4657aa4f53d1da8f3d9a4b6a7b7f2c7afa61ca113d0db9"><div class="ttname"><a href="../../dc/d58/namespacechi__math.html#ad4724873fa5ae74b39c4657aa4f53d1da8f3d9a4b6a7b7f2c7afa61ca113d0db9">chi_math::UnknownType::SCALAR</a></div><div class="ttdeci">@ SCALAR</div></div>
<div class="ttc" id="anamespacechi__math_html_ad4724873fa5ae74b39c4657aa4f53d1dad7dc5b5f08aa4bc980c2f7e92a9046d4"><div class="ttname"><a href="../../dc/d58/namespacechi__math.html#ad4724873fa5ae74b39c4657aa4f53d1dad7dc5b5f08aa4bc980c2f7e92a9046d4">chi_math::UnknownType::VECTOR_N</a></div><div class="ttdeci">@ VECTOR_N</div></div>
</div><!-- fragment --><p >Using this unknown manager to map DOFs is then done as shown below in Figure 4.</p>
<div class="image">
<img src="../../UkMan-NODAL.png" alt="" width="800px"/>
<div class="caption">
Figure 4: Mapping with a nodal ordering</div></div>
<p >Notice here that the ordering is per-node, i.e., for each node the DOFs all the DOFs are stacked into a vector before moving to a new node. This is the default ordering in ChiTech.</p>
<h1><a class="anchor" id="devmanA3_sec4"></a>
4 Multiple DOFs Block ordering</h1>
<p >To create a Block-ordered vector mapping the only modification needed is in the constructor of the unknown manager: </p><div class="fragment"><div class="line"><a class="code hl_class" href="../../d9/da7/classchi__math_1_1_unknown_manager.html">chi_math::UnknownManager</a> uk_man(<a class="code hl_enumvalue" href="../../dc/d58/namespacechi__math.html#a863c3eb4ef311ca7cd86c5e26f89f44ca4d34f53389ed7f28ca91fc31ea360a66">chi_math::UnknownStorageType::BLOCK</a>);</div>
<div class="line">uk_man.<a class="code hl_function" href="../../d9/da7/classchi__math_1_1_unknown_manager.html#a07fb29a7555ba61bd0e22a584b4abb78">AddUnknown</a>(<a class="code hl_enumvalue" href="../../dc/d58/namespacechi__math.html#ad4724873fa5ae74b39c4657aa4f53d1da20760c37f74c5ecf95beeadd1407fbef">chi_math::UnknownType::VECTOR_2</a>);    <span class="comment">//u_x, u_y</span></div>
<div class="line">uk_man.<a class="code hl_function" href="../../d9/da7/classchi__math_1_1_unknown_manager.html#a07fb29a7555ba61bd0e22a584b4abb78">AddUnknown</a>(<a class="code hl_enumvalue" href="../../dc/d58/namespacechi__math.html#ad4724873fa5ae74b39c4657aa4f53d1dad7dc5b5f08aa4bc980c2f7e92a9046d4">chi_math::UnknownType::VECTOR_N</a>, 3); <span class="comment">//phi_0 to phi_2</span></div>
<div class="line">uk_man.<a class="code hl_function" href="../../d9/da7/classchi__math_1_1_unknown_manager.html#a07fb29a7555ba61bd0e22a584b4abb78">AddUnknown</a>(<a class="code hl_enumvalue" href="../../dc/d58/namespacechi__math.html#ad4724873fa5ae74b39c4657aa4f53d1da8f3d9a4b6a7b7f2c7afa61ca113d0db9">chi_math::UnknownType::SCALAR</a>);      <span class="comment">//pressure</span></div>
<div class="ttc" id="anamespacechi__math_html_a863c3eb4ef311ca7cd86c5e26f89f44ca4d34f53389ed7f28ca91fc31ea360a66"><div class="ttname"><a href="../../dc/d58/namespacechi__math.html#a863c3eb4ef311ca7cd86c5e26f89f44ca4d34f53389ed7f28ca91fc31ea360a66">chi_math::UnknownStorageType::BLOCK</a></div><div class="ttdeci">@ BLOCK</div></div>
</div><!-- fragment --><p >Now that we specified that we should use <code><a class="el" href="../../dc/d58/namespacechi__math.html#a863c3eb4ef311ca7cd86c5e26f89f44ca4d34f53389ed7f28ca91fc31ea360a66">chi_math::UnknownStorageType::BLOCK</a></code> the unknown manager maps as shown in Figure 5 below</p>
<div class="image">
<img src="../../UkMan-Block.png" alt="" width="800px"/>
<div class="caption">
Figure 5: Mapping with a block ordering</div></div>
<p >Block ordering is likely desireable if one wishes to apply block-solves. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">Chi-Tech</a></li><li class="navelem"><a class="el" href="../../d7/db6/_programmer_manual.html">Developer&#39;s manual</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
